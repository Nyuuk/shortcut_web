import{r as o,j as e}from"./app-51a4d728.js";import{A as E}from"./Admin-a8153a28.js";import{B as p,M as u,L as m,T as v,a as F,C as b}from"./Toast-3a17b069.js";import{C as M}from"./Card-a9a93412.js";import{G as _,H as P}from"./index-1bed09f8.js";import{SearchComp as H}from"./NewMember-57e2d29a.js";import{s as i}from"./signalsComponents-9f2c803d.js";import{addNotif as n}from"./Notification-687986aa.js";import{O as I,a as z}from"./runtime.module-d88397df.js";/* empty css            */import"./ConvertToWib-9b60ea4e.js";import"./dayjs.min-322c0437.js";import"./Table-881487a3.js";import"./index-5543ccc7.js";function A(s){return _({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(s)}const f=z(!1);function S(){const[s,c]=o.useState(!1),[l,h]=o.useState([]);console.log("Programs rendered");const d=async()=>{try{const a=await axios.get(route("dashboard.api.get-programs"));console.log(a.data.data),i.data.value={...i.data.value,data:a.data.data},h(a.data.data),a.data.data.length===0?n({title:"No data found",success:!1}):n({title:"Data has been fetched successfully",success:!0},!0,1e3)}catch(a){n({title:"Failed to fetch data",success:!1}),console.error(a)}},t=a=>{c(x=>!x),i.data.value={...i.data.value,id:a}},r=()=>{c(a=>!a),i.data.value={...i.data.value,id:null}};return o.useEffect(()=>{d()},[]),I(()=>{f.value&&(d(),f.value=!1)}),e.jsx(e.Fragment,{children:e.jsxs(E,{children:[e.jsx("h1",{className:"text-xl text-gray-600 dark:text-gray-400 font-semibold uppercase mb-1",children:"Programs"}),e.jsxs("div",{className:"flex flex-row flex-wrap justify-between text-center items-center gap-2",children:[e.jsx(H,{}),e.jsxs(p,{color:"blue",outline:!0,onClick:()=>c(a=>!a),children:[e.jsx(A,{className:"mr-2 h-6 w-6"}),"New Program"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 pt-4 transition-all duration-300",children:l==null?void 0:l.map((a,x)=>e.jsx(B,{data:a,changeModal:()=>t(a.id)},x))}),e.jsxs(u,{show:s,size:"md",popup:!0,onClose:r,children:[e.jsx(u.Header,{}),e.jsx(u.Body,{children:e.jsx("div",{className:"space-y-6",children:e.jsx(L,{})})})]})]})})}const B=({data:s,changeModal:c})=>{const{username:l,nama:h,harga:d,deskripsi:t,is_active:r,is_ebook:a}=s,[x,j]=o.useState(!1),[g,k]=o.useState(!1),w=async()=>{try{const N=await axios.delete(route("dashboard.api.delete-program",{id:s.id}));n({title:"Data has been deleted successfully",success:!0}),j(!1)}catch(N){n({title:"Failed to delete data",success:!1}),console.error(N)}finally{f.value=!0}},C=()=>{k(!g)},y=29,D=g?t:t.slice(0,y);return e.jsxs(e.Fragment,{children:[e.jsxs(M,{theme:{root:{children:"flex h-full flex-col justify-center gap-4 p-6"}},className:g?"row-span-2":"",children:[e.jsxs("div",{className:"flex flex-col mb-1 ",children:[e.jsx("h1",{className:"uppercase text-lg text-gray-750 dark:text-gray-100 text-center mb-2",children:l||"New Program"}),e.jsxs("div",{className:"w-full text-sm text-gray-600 dark:text-gray-400 grid grid-cols-5 grid-flow-dense gap-1",children:[e.jsx("span",{className:"col-span-2",children:"Name of program"})," ",e.jsx("span",{className:"col-span-1",children:":"}),e.jsx("span",{className:"capitalize col-span-2 text-gray-800 dark:text-gray-200",children:h}),e.jsx("span",{className:"col-span-2",children:"Harga"}),e.jsx("span",{className:"col-span-1",children:":"}),e.jsx("span",{className:"col-span-2 text-gray-800 dark:text-gray-200",children:d}),e.jsx("span",{className:"col-span-2",children:"Is Active"}),e.jsx("span",{className:"col-span-1",children:":"}),r===!0?e.jsx("span",{className:"col-span-2 text-green-500",children:"True"}):e.jsx("span",{className:"col-span-2 text-red-500",children:"False"}),e.jsx("span",{className:"col-span-2",children:"Is Ebook"}),e.jsx("span",{className:"col-span-1",children:":"}),a===!0?e.jsx("span",{className:"col-span-2 text-green-500",children:"True"}):e.jsx("span",{className:"col-span-2 text-red-500",children:"False"}),e.jsx("span",{className:"col-span-2",children:"Deskripsi"}),e.jsx("span",{className:"col-span-1",children:":"}),e.jsxs("span",{className:"col-span-2 text-gray-800 dark:text-gray-200",children:[D," ",t.length>y&&e.jsx("button",{onClick:C,className:"text-blue-500",children:g?"Read less":". . ."})]})]})]}),e.jsx("div",{className:"w-full",children:e.jsx(p,{color:"green",onClick:c,className:"w-full",children:"Edit"})})]}),x&&e.jsxs(u,{show:x,size:"md",onClose:()=>j(!1),popup:!0,children:[e.jsx(u.Header,{}),e.jsx(u.Body,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsxs("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:["Are you sure you want to delete this program"," [",e.jsx("span",{className:"font-bold uppercase text-gray-600 dark:text-gray-200",children:l}),"] ?"]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(p,{color:"failure",onClick:w,children:"Yes, I'm sure"}),e.jsx(p,{color:"gray",onClick:()=>j(!1),children:"No, cancel"})]})]})})]})]})},L=()=>{console.log("T1 rendered");const[s,c]=o.useState({is_active:!1}),l=(t,r)=>{c(a=>({...a,[r]:t}))},h=async t=>{t.preventDefault();try{const r=s;c({});let a;s!=null&&s.id?a=await axios.put(route("dashboard.api.update-program"),r):a=await axios.post(route("dashboard.api.new-program"),r),a.status===200&&(s!=null&&s.id?n({title:"Data has been updated successfully",success:!0},!0,2e3):n({title:"Data has been added successfully",success:!0},!0,2e3)),console.log(a)}catch(r){s!=null&&s.id?n({title:"Data has not been updated",success:!1},!0):n({title:"Data has not been added",success:!1},!0),console.log(r)}finally{c({is_active:!1}),i.data.value={...i.data.value,id:null},f.value=!0}},d=()=>{var t,r;if(!((t=i.data.value)!=null&&t.id)){c({is_active:!1});return}c((r=i.data.value.data)==null?void 0:r.filter(a=>a.id===i.data.value.id)[0])};return o.useEffect(()=>{d()},[]),e.jsxs("form",{className:"flex max-w-md flex-col gap-4",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{value:"Name of program",className:"text-gray-500 dark:text-gray-300"})}),e.jsx(v,{type:"text",placeholder:"Super Grammar 1",required:!0,value:s==null?void 0:s.nama,onChange:t=>l(t.target.value,"nama")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{value:"Program's unique name",className:"text-gray-500 dark:text-gray-300"})}),e.jsx(v,{type:"text",placeholder:"sg1",required:!0,pattern:"[a-z0-9]*",onChange:t=>l(t.target.value,"username"),value:s==null?void 0:s.username})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{value:"Price",className:"text-gray-500 dark:text-gray-300"})}),e.jsx(v,{type:"text",placeholder:"75000",pattern:"[0-9]*",required:!0,onChange:t=>l(t.target.value,"harga"),value:s==null?void 0:s.harga})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(m,{value:"Description",className:"text-gray-500 dark:text-gray-300"})}),e.jsx(F,{type:"text",placeholder:"Leave a description here",rows:4,onChange:t=>l(t.target.value,"deskripsi"),value:s==null?void 0:s.deskripsi})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx(b,{id:"shipping",onChange:t=>l(t.target.checked,"is_active"),checked:s==null?void 0:s.is_active})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m,{htmlFor:"shipping",className:"text-gray-500 dark:text-gray-300",children:"Active"}),e.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:e.jsx("span",{className:"text-xs font-normal",children:"Check it, if this program is active"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx(b,{id:"ebook",onChange:t=>l(t.target.checked,"is_ebook"),checked:s==null?void 0:s.is_ebook})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(m,{htmlFor:"ebook",className:"text-gray-500 dark:text-gray-300",children:"Ebook"}),e.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:e.jsx("span",{className:"text-xs font-normal",children:"Check it, if this program is Ebook"})})]})]}),e.jsx(p,{type:"submit",outline:!0,isProcessing:Object.keys(s).length===0,disabled:!(Object.keys(s).length>=5),children:"Submit"})]})};export{S as default};
