import{r,j as a}from"./app-51a4d728.js";import{A as j}from"./Admin-a8153a28.js";import{TableWithSearch as P}from"./Table-881487a3.js";import{T as w,P as _}from"./Toast-3a17b069.js";import{a as N}from"./index-5543ccc7.js";import{addNotif as S}from"./Notification-687986aa.js";/* empty css            */import"./signalsComponents-9f2c803d.js";import"./runtime.module-d88397df.js";import"./ConvertToWib-9b60ea4e.js";import"./dayjs.min-322c0437.js";import"./index-1bed09f8.js";function z(){const[t,s]=r.useState(1),[n,c]=r.useState(10),[u,l]=r.useState([]),[d,h]=r.useState(1),[i,g]=r.useState(),x=[{uniq_name:"nama",name:"Name"},{uniq_name:"no_wa",name:"Whatsapp Num",type:"link"},{uniq_name:"alamat_st",name:"Temporary Address"},{uniq_name:"catatan",name:"Note"},{uniq_name:"programs",name:"Programs",type:"list"},{uniq_name:"created_at",name:"Requested At",type:"date"}],p=e=>{s(e)},y=async()=>{l([]);const e={title:"Data has been fetched successfully",success:!0};try{const m={page:t,perPage:n};i&&(m.search=i);const o=await axios.get(route("dashboard.api.get-requests",m));o.status===200?(l(o.data.data.data),s(o.data.data.current_page),c(o.data.data.per_page),h(o.data.data.last_page),o.data.data.data.length===0?(e.title="Data not found",e.success=!1):(e.title="Data has been fetched successfully",e.success=!0)):(e.title="Failed to fetch data",e.success=!1)}catch(m){console.error(m),e.title="Failed to fetch data",e.success=!1}finally{S(e)}};return r.useEffect(()=>{console.log([i,t,n,d]);const e=setTimeout(async()=>{await y()},500);return()=>clearTimeout(e)},[i,t,n]),a.jsx(a.Fragment,{children:a.jsxs(j,{children:[a.jsxs("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[a.jsx(b,{value:i,onChange:e=>g(e.target.value)}),a.jsx(f,{className:"hidden md:block",total:d,currentPage:t,onPageChange:p})]}),a.jsx(P,{columns:x,data:u}),a.jsx(f,{className:"block md:hidden mt-4",layout:"navigation",total:d,currentPage:t,onPageChange:p})]})})}const b=({...t})=>{const{className:s,value:n,onChange:c}=t;return a.jsx("div",{className:"w-full md:max-w-[calc(100vw-500px)] xl:max-w-md "+(s&&s),children:a.jsx(w,{id:"search",type:"text",icon:N,placeholder:"Search here",sizing:"md",onChange:c,value:n})})},f=({currentPage:t=1,onPageChange:s=()=>{},total:n=10,className:c,...u})=>{const l={pages:{base:"inline-flex items-center -space-x-px"}};return a.jsx("div",{className:"flex overflow-x-auto justify-center items-center "+c,children:a.jsx(_,{...u,currentPage:t,totalPages:n,onPageChange:s,showIcons:!0,theme:l})})};export{b as SearchComp,z as default};
